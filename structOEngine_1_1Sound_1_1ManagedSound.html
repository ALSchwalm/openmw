<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenMW: OEngine::Sound::ManagedSound Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceOEngine.html">OEngine</a>::<a class="el" href="namespaceOEngine_1_1Sound.html">Sound</a>::<a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html">ManagedSound</a>
  </div>
</div>
<div class="contents">
<h1>OEngine::Sound::ManagedSound Struct Reference</h1><!-- doxytag: class="OEngine::Sound::ManagedSound" --><!-- doxytag: inherits="Mangle::Sound::SoundFilter" -->
<p><a href="structOEngine_1_1Sound_1_1ManagedSound-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a37da7831bf0368cac6a273e15e5ab99a">detach</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a1ad64c60d6c9a2a68fef3dd9da7e66e6">ManagedSound</a> (SoundPtr snd, <a class="el" href="classOEngine_1_1Sound_1_1SoundManager.html">SoundManager</a> *<a class="el" href="openal__various__test_8cpp.html#a1e9c3e49b4ed05ec4f38d6e761942774">mg</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#aa47691d65098fe603171b5d99a801dbd">~ManagedSound</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#af515f358e2687296c76a79f4e3edc0a0">setup</a> (SoundPtr <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a3058fead66ef8f778ec937a09c362a0f">self</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a9a4a0df40be1c52e11dfc59ec3a5cd65">play</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Play or resume the sound.  <a href="#a9a4a0df40be1c52e11dfc59ec3a5cd65"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#ac63cfe1ea3f4e5b217ea261ccaae6f7c">update</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SoundPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a4b744706a1165d0bbcec7f50296f712b">clone</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new instance of this sound.  <a href="#a4b744706a1165d0bbcec7f50296f712b"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html">ManagedSound</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a22cc0cd3fe5e688796b1e035690218c2">next</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html">ManagedSound</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a8293c29d3f49e74c61adfb2a89a597ea">prev</a></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#ab1246becab01a31b82a1bbfe4e2846ba">lock</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a25909594f35f9dc188da965973b29dd0">unlock</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classOEngine_1_1Sound_1_1SoundManager.html">SoundManager</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#aa00ed0da6177e4dc959bbe00ede01fea">mgr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">WSoundPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a1bf31b84f10cd949d12f4201028ec296">weak</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SoundPtr&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a3058fead66ef8f778ec937a09c362a0f">self</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This is our own internal implementation of the <a class="el" href="classMangle_1_1Sound_1_1Sound.html">Mangle::Sound::Sound</a> interface. This class links a SoundPtr to itself and prevents itself from being deleted as long as the sound is playing. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1ad64c60d6c9a2a68fef3dd9da7e66e6"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::ManagedSound" ref="a1ad64c60d6c9a2a68fef3dd9da7e66e6" args="(SoundPtr snd, SoundManager *mg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OEngine::Sound::ManagedSound::ManagedSound </td>
          <td>(</td>
          <td class="paramtype">SoundPtr&nbsp;</td>
          <td class="paramname"> <em>snd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOEngine_1_1Sound_1_1SoundManager.html">SoundManager</a> *&nbsp;</td>
          <td class="paramname"> <em>mg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa47691d65098fe603171b5d99a801dbd"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::~ManagedSound" ref="aa47691d65098fe603171b5d99a801dbd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OEngine::Sound::ManagedSound::~ManagedSound </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4b744706a1165d0bbcec7f50296f712b"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::clone" ref="a4b744706a1165d0bbcec7f50296f712b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SoundPtr OEngine::Sound::ManagedSound::clone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new instance of this sound. </p>
<p>Playback status is not cloned, only the sound data itself. Back-ends can use this as a means of sharing data and saving memory. </p>

<p>Implements <a class="el" href="classMangle_1_1Sound_1_1Sound.html#a77296d077c32491c21b01a09be0fc5c2">Mangle::Sound::Sound</a>.</p>

</div>
</div>
<a class="anchor" id="a37da7831bf0368cac6a273e15e5ab99a"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::detach" ref="a37da7831bf0368cac6a273e15e5ab99a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::detach </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Detach this sound from its manager. This means that the manager will no longer know we exist. Typically only called when either the sound or the manager is about to get deleted.</p>
<p>Since this means <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#ac63cfe1ea3f4e5b217ea261ccaae6f7c">update()</a> will no longer be called, we also have to unlock the sound manually since it will no longer be able to do that itself. This means that the sound may be deleted, even if it is still playing, when the manager is deleted.</p>
<p>However, you are still allowed to keep and manage your own SoundPtr references, but the lock/unlock system is disabled after the manager is gone. </p>

</div>
</div>
<a class="anchor" id="ab1246becab01a31b82a1bbfe4e2846ba"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::lock" ref="ab1246becab01a31b82a1bbfe4e2846ba" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::lock </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a4a0df40be1c52e11dfc59ec3a5cd65"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::play" ref="a9a4a0df40be1c52e11dfc59ec3a5cd65" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::play </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Play or resume the sound. </p>

<p>Reimplemented from <a class="el" href="classMangle_1_1Sound_1_1SoundFilter.html#a9e667b99670c782ac939393051c031b0">Mangle::Sound::SoundFilter</a>.</p>

</div>
</div>
<a class="anchor" id="af515f358e2687296c76a79f4e3edc0a0"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::setup" ref="af515f358e2687296c76a79f4e3edc0a0" args="(SoundPtr self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::setup </td>
          <td>(</td>
          <td class="paramtype">SoundPtr&nbsp;</td>
          <td class="paramname"> <em>self</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a25909594f35f9dc188da965973b29dd0"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::unlock" ref="a25909594f35f9dc188da965973b29dd0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::unlock </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac63cfe1ea3f4e5b217ea261ccaae6f7c"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::update" ref="ac63cfe1ea3f4e5b217ea261ccaae6f7c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OEngine::Sound::ManagedSound::update </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aa00ed0da6177e4dc959bbe00ede01fea"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::mgr" ref="aa00ed0da6177e4dc959bbe00ede01fea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classOEngine_1_1Sound_1_1SoundManager.html">SoundManager</a>* <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#aa00ed0da6177e4dc959bbe00ede01fea">OEngine::Sound::ManagedSound::mgr</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Who's your daddy? This is set if and only if we are listed internally in the given <a class="el" href="classOEngine_1_1Sound_1_1SoundManager.html">SoundManager</a>.</p>
<p>It may be NULL if the manager has been deleted but the user keeps their own SoundPtrs to the object. </p>

</div>
</div>
<a class="anchor" id="a22cc0cd3fe5e688796b1e035690218c2"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::next" ref="a22cc0cd3fe5e688796b1e035690218c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html">ManagedSound</a>* <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a22cc0cd3fe5e688796b1e035690218c2">OEngine::Sound::ManagedSound::next</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8293c29d3f49e74c61adfb2a89a597ea"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::prev" ref="a8293c29d3f49e74c61adfb2a89a597ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html">ManagedSound</a> * <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a8293c29d3f49e74c61adfb2a89a597ea">OEngine::Sound::ManagedSound::prev</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3058fead66ef8f778ec937a09c362a0f"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::self" ref="a3058fead66ef8f778ec937a09c362a0f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SoundPtr <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a3058fead66ef8f778ec937a09c362a0f">OEngine::Sound::ManagedSound::self</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1bf31b84f10cd949d12f4201028ec296"></a><!-- doxytag: member="OEngine::Sound::ManagedSound::weak" ref="a1bf31b84f10cd949d12f4201028ec296" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WSoundPtr <a class="el" href="structOEngine_1_1Sound_1_1ManagedSound.html#a1bf31b84f10cd949d12f4201028ec296">OEngine::Sound::ManagedSound::weak</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Keep a weak pointer to ourselves, which we convert into a 'strong' pointer when we are playing. When 'self' is pointing to ourselves, the object will never be deleted.</p>
<p>This is used to make sure the sound is not deleted while playing, unless it is explicitly ordered to do so by the manager.</p>
<p>TODO: This kind of construct is useful. If we need it elsewhere later, template it. It would be generally useful in any system where we poll to check if a resource is still needed, but where manual references are allowed. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>libs/openengine/sound/<a class="el" href="sndmanager_8cpp.html">sndmanager.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Mar 2 11:45:03 2012 for OpenMW by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
