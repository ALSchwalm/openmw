<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OpenMW: components/nif/data.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>components/nif/data.hpp</h1><a href="data_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">  OpenMW - The completely unofficial reimplementation of Morrowind</span>
<a name="l00003"></a>00003 <span class="comment">  Copyright (C) 2008-2010  Nicolay Korslund</span>
<a name="l00004"></a>00004 <span class="comment">  Email: &lt; korslund@gmail.com &gt;</span>
<a name="l00005"></a>00005 <span class="comment">  WWW: http://openmw.sourceforge.net/</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">  This file (data.h) is part of the OpenMW package.</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">  OpenMW is distributed as free software: you can redistribute it</span>
<a name="l00010"></a>00010 <span class="comment">  and/or modify it under the terms of the GNU General Public License</span>
<a name="l00011"></a>00011 <span class="comment">  version 3, as published by the Free Software Foundation.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">  This program is distributed in the hope that it will be useful, but</span>
<a name="l00014"></a>00014 <span class="comment">  WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00016"></a>00016 <span class="comment">  General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">  You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment">  version 3 along with this program. If not, see</span>
<a name="l00020"></a>00020 <span class="comment">  http://www.gnu.org/licenses/ .</span>
<a name="l00021"></a>00021 <span class="comment"></span>
<a name="l00022"></a>00022 <span class="comment"> */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#ifndef _NIF_DATA_H_</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define _NIF_DATA_H_</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="controlled_8hpp.html">controlled.hpp</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;Ogre.h&gt;</span>
<a name="l00030"></a><a class="code" href="classNif_1_1NiSourceTexture.html">00030</a> 
<a name="l00031"></a>00031 <span class="keyword">namespace </span>Nif
<a name="l00032"></a>00032 {
<a name="l00033"></a><a class="code" href="classNif_1_1NiSourceTexture.html#aa89393fb3370a697a743770fc4b484c2">00033</a> 
<a name="l00034"></a>00034 <span class="keyword">class </span><a class="code" href="classNif_1_1NiSourceTexture.html">NiSourceTexture</a> : <span class="keyword">public</span> <a class="code" href="classNif_1_1Named.html" title="Has name, extra-data and controller.">Named</a>
<a name="l00035"></a><a class="code" href="classNif_1_1NiSourceTexture.html#a1b737320aa57970851aea2ce600bfa3d">00035</a> {
<a name="l00036"></a><a class="code" href="classNif_1_1NiSourceTexture.html#adb9f01168efecc7d61e09404515c9c58">00036</a> <span class="keyword">public</span>:
<a name="l00037"></a>00037 
<a name="l00038"></a>00038   <span class="comment">// Is this an external (references a separate texture file) or</span>
<a name="l00039"></a>00039   <span class="comment">// internal (data is inside the nif itself) texture?</span>
<a name="l00040"></a>00040   <span class="keywordtype">bool</span> <a class="code" href="classNif_1_1NiSourceTexture.html#aa89393fb3370a697a743770fc4b484c2">external</a>;
<a name="l00041"></a>00041 
<a name="l00042"></a>00042   <a class="code" href="structMisc_1_1SliceArray.html">Misc::SString</a> <a class="code" href="classNif_1_1NiSourceTexture.html#a1b737320aa57970851aea2ce600bfa3d">filename</a>;    <span class="comment">// In case of external textures</span>
<a name="l00043"></a>00043   <a class="code" href="classNif_1_1RecordPtrT.html">NiPixelDataPtr</a> <a class="code" href="classNif_1_1NiSourceTexture.html#adb9f01168efecc7d61e09404515c9c58">data</a>; <span class="comment">// In case of internal textures</span>
<a name="l00044"></a>00044 
<a name="l00045"></a><a class="code" href="classNif_1_1NiSourceTexture.html#a51cf65807f9e48a974434ccf376829c2">00045</a>   <span class="comment">/* Pixel layout</span>
<a name="l00046"></a>00046 <span class="comment">     0 - Palettised</span>
<a name="l00047"></a>00047 <span class="comment">     1 - High color 16</span>
<a name="l00048"></a>00048 <span class="comment">     2 - True color 32</span>
<a name="l00049"></a>00049 <span class="comment">     3 - Compressed</span>
<a name="l00050"></a>00050 <span class="comment">     4 - Bumpmap</span>
<a name="l00051"></a><a class="code" href="classNif_1_1NiSourceTexture.html#a4fbc2a5f5cc0fb52fbf5b22406ce62bf">00051</a> <span class="comment">     5 - Default */</span>
<a name="l00052"></a>00052   <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiSourceTexture.html#a51cf65807f9e48a974434ccf376829c2">pixel</a>;
<a name="l00053"></a>00053 
<a name="l00054"></a>00054   <span class="comment">/* Mipmap format</span>
<a name="l00055"></a>00055 <span class="comment">     0 - no</span>
<a name="l00056"></a>00056 <span class="comment">     1 - yes</span>
<a name="l00057"></a>00057 <span class="comment">     2 - default */</span>
<a name="l00058"></a>00058   <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiSourceTexture.html#a4fbc2a5f5cc0fb52fbf5b22406ce62bf">mipmap</a>;
<a name="l00059"></a><a class="code" href="classNif_1_1NiSourceTexture.html#a5d2cadcedb5f110fda2b1c3bd95fc5ce">00059</a> 
<a name="l00060"></a>00060   <span class="comment">/* Alpha</span>
<a name="l00061"></a><a class="code" href="classNif_1_1NiSourceTexture.html#a179c0f7b7b04221c75544b59a2a2f1f8">00061</a> <span class="comment">     0 - none</span>
<a name="l00062"></a>00062 <span class="comment">     1 - binary</span>
<a name="l00063"></a>00063 <span class="comment">     2 - smooth</span>
<a name="l00064"></a>00064 <span class="comment">     3 - default (use material alpha, or multiply material with texture if present)</span>
<a name="l00065"></a>00065 <span class="comment">  */</span>
<a name="l00066"></a>00066   <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiSourceTexture.html#a5d2cadcedb5f110fda2b1c3bd95fc5ce">alpha</a>;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiSourceTexture.html#a179c0f7b7b04221c75544b59a2a2f1f8" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00069"></a>00069   {
<a name="l00070"></a>00070     <a class="code" href="classNif_1_1NiSourceTexture.html#a179c0f7b7b04221c75544b59a2a2f1f8" title="Parses the record from file.">Named::read</a>(nif);
<a name="l00071"></a>00071 
<a name="l00072"></a>00072     <a class="code" href="classNif_1_1NiSourceTexture.html#aa89393fb3370a697a743770fc4b484c2">external</a> = !!nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a23f773a6b68454f026f1f7089c171d22">getByte</a>();
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiSourceTexture.html#aa89393fb3370a697a743770fc4b484c2">external</a>) <a class="code" href="classNif_1_1NiSourceTexture.html#a1b737320aa57970851aea2ce600bfa3d">filename</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae41f33f47f7a1d5bf0711e19b5640329">getString</a>();
<a name="l00075"></a>00075     <span class="keywordflow">else</span>
<a name="l00076"></a>00076       {
<a name="l00077"></a>00077         nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a23f773a6b68454f026f1f7089c171d22">getByte</a>(); <span class="comment">// always 1</span>
<a name="l00078"></a>00078         <a class="code" href="classNif_1_1NiSourceTexture.html#adb9f01168efecc7d61e09404515c9c58">data</a>.<a class="code" href="classNif_1_1RecordPtrT.html#a90aae241a4cbecb28e56ae9c11401409" title="Read the index from the nif.">read</a>(nif);
<a name="l00079"></a>00079       }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <a class="code" href="classNif_1_1NiSourceTexture.html#a51cf65807f9e48a974434ccf376829c2">pixel</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00082"></a>00082     <a class="code" href="classNif_1_1NiSourceTexture.html#a4fbc2a5f5cc0fb52fbf5b22406ce62bf">mipmap</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00083"></a>00083     <a class="code" href="classNif_1_1NiSourceTexture.html#a5d2cadcedb5f110fda2b1c3bd95fc5ce">alpha</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00084"></a>00084 
<a name="l00085"></a>00085     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a23f773a6b68454f026f1f7089c171d22">getByte</a>(); <span class="comment">// always 1</span>
<a name="l00086"></a><a class="code" href="classNif_1_1ShapeData.html">00086</a>   }
<a name="l00087"></a>00087 };
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="classNif_1_1ShapeData.html#ad0c2068cac023566d1cd0282ddbb298f">00089</a> <span class="comment">// Common ancestor for several data classes</span>
<a name="l00090"></a><a class="code" href="classNif_1_1ShapeData.html#a8c967365ba511f5cffaadd546b6e0653">00090</a> <span class="keyword">class </span><a class="code" href="classNif_1_1ShapeData.html">ShapeData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00091"></a><a class="code" href="classNif_1_1ShapeData.html#a8ca63276dd365610cac7c7e3f7f738fc">00091</a> {
<a name="l00092"></a>00092 <span class="keyword">public</span>:
<a name="l00093"></a><a class="code" href="classNif_1_1ShapeData.html#a525b0df3ca417af07158d0a6272612f7">00093</a>   <a class="code" href="structMisc_1_1SliceArray.html">Misc::FloatArray</a> <a class="code" href="classNif_1_1ShapeData.html#ad0c2068cac023566d1cd0282ddbb298f">vertices</a>, <a class="code" href="classNif_1_1ShapeData.html#a49db4c6ce3ed29af57cde20fc099fe77">normals</a>, <a class="code" href="classNif_1_1ShapeData.html#aa62e4411e1f8e0cdc0d60a492f78721b">colors</a>, <a class="code" href="classNif_1_1ShapeData.html#a430630342bd936531e5a2b8d9c22be0f">uvlist</a>;
<a name="l00094"></a>00094   <span class="keyword">const</span> <a class="code" href="structNif_1_1Vector.html">Vector</a> *<a class="code" href="classNif_1_1ShapeData.html#a8c967365ba511f5cffaadd546b6e0653">center</a>;
<a name="l00095"></a>00095   <span class="keywordtype">float</span> <a class="code" href="classNif_1_1ShapeData.html#a8ca63276dd365610cac7c7e3f7f738fc">radius</a>;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1ShapeData.html#a525b0df3ca417af07158d0a6272612f7" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00098"></a>00098   {
<a name="l00099"></a>00099     <span class="keywordtype">int</span> verts = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00102"></a>00102       <a class="code" href="classNif_1_1ShapeData.html#ad0c2068cac023566d1cd0282ddbb298f">vertices</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aeb86f9f029da3f199731f1ff7c968fdd">getFloatLen</a>(verts*3);
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00105"></a>00105       <a class="code" href="classNif_1_1ShapeData.html#a49db4c6ce3ed29af57cde20fc099fe77">normals</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aeb86f9f029da3f199731f1ff7c968fdd">getFloatLen</a>(verts*3);
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <a class="code" href="classNif_1_1ShapeData.html#a8c967365ba511f5cffaadd546b6e0653">center</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aed91c4c3f4ec9de2ea31f052e74a4dc2">getVector</a>();
<a name="l00108"></a>00108     <a class="code" href="classNif_1_1ShapeData.html#a8ca63276dd365610cac7c7e3f7f738fc">radius</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00111"></a>00111       <a class="code" href="classNif_1_1ShapeData.html#aa62e4411e1f8e0cdc0d60a492f78721b">colors</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aeb86f9f029da3f199731f1ff7c968fdd">getFloatLen</a>(verts*4);
<a name="l00112"></a>00112 
<a name="l00113"></a>00113     <span class="keywordtype">int</span> uvs = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">// Only the first 6 bits are used as a count. I think the rest are</span>
<a name="l00116"></a>00116     <span class="comment">// flags of some sort.</span>
<a name="l00117"></a>00117     uvs &amp;= 0x3f;
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00120"></a><a class="code" href="classNif_1_1NiTriShapeData.html">00120</a>       <a class="code" href="classNif_1_1ShapeData.html#a430630342bd936531e5a2b8d9c22be0f">uvlist</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aeb86f9f029da3f199731f1ff7c968fdd">getFloatLen</a>(uvs*verts*2);
<a name="l00121"></a>00121   }
<a name="l00122"></a>00122 };
<a name="l00123"></a>00123 
<a name="l00124"></a><a class="code" href="classNif_1_1NiTriShapeData.html#a0db7f872526b502bff43a22114c95ff5">00124</a> <span class="keyword">class </span><a class="code" href="classNif_1_1NiTriShapeData.html">NiTriShapeData</a> : <span class="keyword">public</span> <a class="code" href="classNif_1_1ShapeData.html">ShapeData</a>
<a name="l00125"></a>00125 {
<a name="l00126"></a><a class="code" href="classNif_1_1NiTriShapeData.html#a3d68eacc6fff6d2451b1944bc980ca15">00126</a> <span class="keyword">public</span>:
<a name="l00127"></a>00127   <span class="comment">// Triangles, three vertex indices per triangle</span>
<a name="l00128"></a>00128   <a class="code" href="structMisc_1_1SliceArray.html">Misc::SliceArray&lt;short&gt;</a> <a class="code" href="classNif_1_1NiTriShapeData.html#a0db7f872526b502bff43a22114c95ff5">triangles</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a>00130   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiTriShapeData.html#a3d68eacc6fff6d2451b1944bc980ca15" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00131"></a>00131   {
<a name="l00132"></a>00132     <a class="code" href="classNif_1_1NiTriShapeData.html#a3d68eacc6fff6d2451b1944bc980ca15" title="Parses the record from file.">ShapeData::read</a>(nif);
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keywordtype">int</span> tris = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00135"></a>00135     <span class="keywordflow">if</span>(tris)
<a name="l00136"></a>00136       {
<a name="l00137"></a>00137         <span class="comment">// We have three times as many vertices as triangles, so this</span>
<a name="l00138"></a>00138         <span class="comment">// is always equal to tris*3.</span>
<a name="l00139"></a>00139         <span class="keywordtype">int</span> cnt = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00140"></a>00140         <a class="code" href="classNif_1_1NiTriShapeData.html#a0db7f872526b502bff43a22114c95ff5">triangles</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ad1c2d5a2d96b5095158992958eb23288">getArrayLen</a>&lt;<span class="keywordtype">short</span>&gt;(cnt);
<a name="l00141"></a>00141       }
<a name="l00142"></a>00142 
<a name="l00143"></a>00143     <span class="comment">// Read the match list, which lists the vertices that are equal to</span>
<a name="l00144"></a>00144     <span class="comment">// vertices. We don&#39;t actually need need this for anything, so</span>
<a name="l00145"></a>00145     <span class="comment">// just skip it.</span>
<a name="l00146"></a>00146     <span class="keywordtype">int</span> verts = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00147"></a>00147     <span class="keywordflow">if</span>(verts)
<a name="l00148"></a>00148       {
<a name="l00149"></a>00149         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;verts;i++)
<a name="l00150"></a>00150           {
<a name="l00151"></a>00151             <span class="comment">// Number of vertices matching vertex &#39;i&#39;</span>
<a name="l00152"></a>00152             <span class="keywordtype">short</span> <a class="code" href="gen__iconv_8cpp.html#ac3f0743d6d500d071ddb4ec5f97d6718">num</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00153"></a>00153             nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(num*<span class="keyword">sizeof</span>(<span class="keywordtype">short</span>));
<a name="l00154"></a>00154           }
<a name="l00155"></a><a class="code" href="classNif_1_1NiAutoNormalParticlesData.html">00155</a>       }
<a name="l00156"></a>00156   }
<a name="l00157"></a>00157 };
<a name="l00158"></a><a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a40698b8d9b63cae3fc7eeaa58e47f378">00158</a> 
<a name="l00159"></a>00159 <span class="keyword">class </span><a class="code" href="classNif_1_1NiAutoNormalParticlesData.html">NiAutoNormalParticlesData</a> : <span class="keyword">public</span> <a class="code" href="classNif_1_1ShapeData.html">ShapeData</a>
<a name="l00160"></a><a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a5db28f1477b73a9d59d0030ac64d5f80">00160</a> {
<a name="l00161"></a>00161 <span class="keyword">public</span>:
<a name="l00162"></a>00162   <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a40698b8d9b63cae3fc7eeaa58e47f378">activeCount</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a5db28f1477b73a9d59d0030ac64d5f80" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00165"></a>00165   {
<a name="l00166"></a>00166     <a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a5db28f1477b73a9d59d0030ac64d5f80" title="Parses the record from file.">ShapeData::read</a>(nif);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="comment">// Should always match the number of vertices</span>
<a name="l00169"></a>00169     <a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a40698b8d9b63cae3fc7eeaa58e47f378">activeCount</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">// Skip all the info, we don&#39;t support particles yet</span>
<a name="l00172"></a>00172     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();  <span class="comment">// Active radius ?</span>
<a name="l00173"></a>00173     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>(); <span class="comment">// Number of valid entries in the following arrays ?</span>
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00176"></a>00176       <span class="comment">// Particle sizes</span>
<a name="l00177"></a><a class="code" href="classNif_1_1NiRotatingParticlesData.html">00177</a>       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aeb86f9f029da3f199731f1ff7c968fdd">getFloatLen</a>(<a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a40698b8d9b63cae3fc7eeaa58e47f378">activeCount</a>);
<a name="l00178"></a>00178   }
<a name="l00179"></a>00179 };
<a name="l00180"></a><a class="code" href="classNif_1_1NiRotatingParticlesData.html#a938df4167244eb816e97381bb454c418">00180</a> 
<a name="l00181"></a>00181 <span class="keyword">class </span><a class="code" href="classNif_1_1NiRotatingParticlesData.html">NiRotatingParticlesData</a> : <span class="keyword">public</span> <a class="code" href="classNif_1_1NiAutoNormalParticlesData.html">NiAutoNormalParticlesData</a>
<a name="l00182"></a>00182 {
<a name="l00183"></a>00183 <span class="keyword">public</span>:
<a name="l00184"></a>00184   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiRotatingParticlesData.html#a938df4167244eb816e97381bb454c418" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00185"></a>00185   {
<a name="l00186"></a>00186     <a class="code" href="classNif_1_1NiRotatingParticlesData.html#a938df4167244eb816e97381bb454c418" title="Parses the record from file.">NiAutoNormalParticlesData::read</a>(nif);
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <span class="keywordflow">if</span>(nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>())
<a name="l00189"></a>00189       <span class="comment">// Rotation quaternions. I THINK activeCount is correct here,</span>
<a name="l00190"></a>00190       <span class="comment">// but verts (vertex number) might also be correct, if there is</span>
<a name="l00191"></a>00191       <span class="comment">// any case where the two don&#39;t match.</span>
<a name="l00192"></a><a class="code" href="classNif_1_1NiPosData.html">00192</a>       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ad1c2d5a2d96b5095158992958eb23288">getArrayLen</a>&lt;<a class="code" href="structNif_1_1Vector4.html">Vector4</a>&gt;(<a class="code" href="classNif_1_1NiAutoNormalParticlesData.html#a40698b8d9b63cae3fc7eeaa58e47f378">activeCount</a>);
<a name="l00193"></a>00193   }
<a name="l00194"></a>00194 };
<a name="l00195"></a><a class="code" href="classNif_1_1NiPosData.html#ae6fc18c5d075be3ca4a85b74249d8685">00195</a> 
<a name="l00196"></a>00196 <span class="keyword">class </span><a class="code" href="classNif_1_1NiPosData.html">NiPosData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00197"></a>00197 {
<a name="l00198"></a>00198 <span class="keyword">public</span>:
<a name="l00199"></a>00199   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiPosData.html#ae6fc18c5d075be3ca4a85b74249d8685" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00200"></a>00200   {
<a name="l00201"></a>00201     <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00202"></a>00202     <span class="keywordtype">int</span> type = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00203"></a>00203     <span class="keywordflow">if</span>(type != 1 &amp;&amp; type != 2)
<a name="l00204"></a>00204       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;Cannot handle NiPosData type&quot;</span>);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <span class="comment">// TODO: Could make structs of these. Seems to be identical to</span>
<a name="l00207"></a>00207     <span class="comment">// translation in NiKeyframeData.</span>
<a name="l00208"></a>00208     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;count; i++)
<a name="l00209"></a>00209       {
<a name="l00210"></a>00210         <span class="comment">/*float time =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00211"></a>00211         nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aed91c4c3f4ec9de2ea31f052e74a4dc2">getVector</a>(); <span class="comment">// This isn&#39;t really shared between type 1</span>
<a name="l00212"></a>00212                           <span class="comment">// and type 2, most likely</span>
<a name="l00213"></a>00213         <span class="keywordflow">if</span>(type == 2)
<a name="l00214"></a>00214           {
<a name="l00215"></a>00215             nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aed91c4c3f4ec9de2ea31f052e74a4dc2">getVector</a>();
<a name="l00216"></a>00216             nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aed91c4c3f4ec9de2ea31f052e74a4dc2">getVector</a>();
<a name="l00217"></a>00217           }
<a name="l00218"></a><a class="code" href="classNif_1_1NiUVData.html">00218</a>       }
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220 };
<a name="l00221"></a><a class="code" href="classNif_1_1NiUVData.html#aea9a46986140dcc9cc5bfa5269eebb47">00221</a> 
<a name="l00222"></a>00222 <span class="keyword">class </span><a class="code" href="classNif_1_1NiUVData.html">NiUVData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00223"></a>00223 {
<a name="l00224"></a>00224 <span class="keyword">public</span>:
<a name="l00225"></a>00225   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiUVData.html#aea9a46986140dcc9cc5bfa5269eebb47" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00226"></a>00226   {
<a name="l00227"></a>00227     <span class="comment">// TODO: This is claimed to be a &quot;float animation key&quot;, which is</span>
<a name="l00228"></a>00228     <span class="comment">// also used in FloatData and KeyframeData. We could probably</span>
<a name="l00229"></a>00229     <span class="comment">// reuse and refactor a lot of this if we actually use it at some</span>
<a name="l00230"></a>00230     <span class="comment">// point.</span>
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;2; i++)
<a name="l00233"></a>00233       {
<a name="l00234"></a>00234         <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00235"></a>00235 
<a name="l00236"></a>00236         <span class="keywordflow">if</span>(count)
<a name="l00237"></a>00237           {
<a name="l00238"></a>00238             nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// always 2</span>
<a name="l00239"></a>00239             nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ad1c2d5a2d96b5095158992958eb23288">getArrayLen</a>&lt;<a class="code" href="structNif_1_1Vector4.html">Vector4</a>&gt;(count); <span class="comment">// Really one time float + one vector</span>
<a name="l00240"></a>00240           }
<a name="l00241"></a>00241       }
<a name="l00242"></a>00242     <span class="comment">// Always 0</span>
<a name="l00243"></a>00243     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00244"></a><a class="code" href="classNif_1_1NiFloatData.html">00244</a>     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00245"></a>00245   }
<a name="l00246"></a>00246 };
<a name="l00247"></a><a class="code" href="classNif_1_1NiFloatData.html#a7add136352f6a85208affed785fd9939">00247</a> 
<a name="l00248"></a>00248 <span class="keyword">class </span><a class="code" href="classNif_1_1NiFloatData.html">NiFloatData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00249"></a>00249 {
<a name="l00250"></a>00250 <span class="keyword">public</span>:
<a name="l00251"></a>00251   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiFloatData.html#a7add136352f6a85208affed785fd9939" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00252"></a>00252   {
<a name="l00253"></a>00253     <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00254"></a>00254     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// always 2</span>
<a name="l00255"></a><a class="code" href="classNif_1_1NiPixelData.html">00255</a>     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ad1c2d5a2d96b5095158992958eb23288">getArrayLen</a>&lt;<a class="code" href="structNif_1_1Vector4.html">Vector4</a>&gt;(count); <span class="comment">// Really one time float + one vector</span>
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 };
<a name="l00258"></a><a class="code" href="classNif_1_1NiPixelData.html#a6bbb488b8e698423c51b6b85c983e3aa">00258</a> 
<a name="l00259"></a><a class="code" href="classNif_1_1NiPixelData.html#acf38ae240ca9b9afed1d19c99abf7531">00259</a> <span class="keyword">class </span><a class="code" href="classNif_1_1NiPixelData.html">NiPixelData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00260"></a>00260 {
<a name="l00261"></a><a class="code" href="classNif_1_1NiPixelData.html#a557a9ca98a50bae8d1a1d22b896f045b">00261</a> <span class="keyword">public</span>:
<a name="l00262"></a>00262   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiPixelData.html#a6bbb488b8e698423c51b6b85c983e3aa">rmask</a>, <a class="code" href="classNif_1_1NiPixelData.html#a91a1c01af31cb2c0964a5c7ca192fb21">gmask</a>, <a class="code" href="classNif_1_1NiPixelData.html#a727e1289fe6ec79f2d2430cb784ccc93">bmask</a>, <a class="code" href="classNif_1_1NiPixelData.html#a481b738e3d7c7f2590a7c9b045f66074">amask</a>;
<a name="l00263"></a>00263   <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiPixelData.html#a1fe1fbf9ed0f65a711ae2be235e8a440">bpp</a>, <a class="code" href="classNif_1_1NiPixelData.html#acf38ae240ca9b9afed1d19c99abf7531">mips</a>;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiPixelData.html#a557a9ca98a50bae8d1a1d22b896f045b" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00266"></a>00266   {
<a name="l00267"></a>00267     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// always 0 or 1</span>
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <a class="code" href="classNif_1_1NiPixelData.html#a6bbb488b8e698423c51b6b85c983e3aa">rmask</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// usually 0xff</span>
<a name="l00270"></a>00270     <a class="code" href="classNif_1_1NiPixelData.html#a91a1c01af31cb2c0964a5c7ca192fb21">gmask</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// usually 0xff00</span>
<a name="l00271"></a>00271     <a class="code" href="classNif_1_1NiPixelData.html#a727e1289fe6ec79f2d2430cb784ccc93">bmask</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// usually 0xff0000</span>
<a name="l00272"></a>00272     <a class="code" href="classNif_1_1NiPixelData.html#a481b738e3d7c7f2590a7c9b045f66074">amask</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// usually 0xff000000 or zero</span>
<a name="l00273"></a>00273 
<a name="l00274"></a>00274     <a class="code" href="classNif_1_1NiPixelData.html#a1fe1fbf9ed0f65a711ae2be235e8a440">bpp</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <span class="comment">// Unknown</span>
<a name="l00277"></a>00277     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(12);
<a name="l00278"></a>00278 
<a name="l00279"></a>00279     <a class="code" href="classNif_1_1NiPixelData.html#acf38ae240ca9b9afed1d19c99abf7531">mips</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="comment">// Bytes per pixel, should be bpp * 8</span>
<a name="l00282"></a>00282     <span class="comment">/*int bytes =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="classNif_1_1NiPixelData.html#acf38ae240ca9b9afed1d19c99abf7531">mips</a>; i++)
<a name="l00285"></a>00285       {
<a name="l00286"></a>00286         <span class="comment">// Image size and offset in the following data field</span>
<a name="l00287"></a>00287         <span class="comment">/*int x =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00288"></a>00288         <span class="comment">/*int y =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00289"></a>00289         <span class="comment">/*int offset =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00290"></a>00290       }
<a name="l00291"></a>00291 
<a name="l00292"></a>00292     <span class="comment">// Skip the data</span>
<a name="l00293"></a>00293     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> dataSize = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00294"></a><a class="code" href="classNif_1_1NiColorData.html">00294</a>     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(dataSize);
<a name="l00295"></a>00295   }
<a name="l00296"></a>00296 };
<a name="l00297"></a><a class="code" href="structNif_1_1NiColorData_1_1ColorData.html">00297</a> 
<a name="l00298"></a>00298 <span class="keyword">class </span><a class="code" href="classNif_1_1NiColorData.html">NiColorData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00299"></a><a class="code" href="structNif_1_1NiColorData_1_1ColorData.html#acc5dfd40eb67b03ce64156cb75a39fb1">00299</a> {
<a name="l00300"></a><a class="code" href="structNif_1_1NiColorData_1_1ColorData.html#a223ca32d836f1040f7a870666d96133e">00300</a> <span class="keyword">public</span>:
<a name="l00301"></a>00301   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiColorData_1_1ColorData.html">ColorData</a>
<a name="l00302"></a>00302   {
<a name="l00303"></a><a class="code" href="classNif_1_1NiColorData.html#a55a147338567198f8431b3529bbf5b5e">00303</a>     <span class="keywordtype">float</span> <a class="code" href="structNif_1_1NiColorData_1_1ColorData.html#acc5dfd40eb67b03ce64156cb75a39fb1">time</a>;
<a name="l00304"></a>00304     <a class="code" href="structNif_1_1Vector4.html">Vector4</a> <a class="code" href="structNif_1_1NiColorData_1_1ColorData.html#a223ca32d836f1040f7a870666d96133e">rgba</a>;
<a name="l00305"></a>00305   };
<a name="l00306"></a>00306 
<a name="l00307"></a>00307   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiColorData.html#a55a147338567198f8431b3529bbf5b5e" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00308"></a>00308   {
<a name="l00309"></a>00309     <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00310"></a>00310     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// always 1</span>
<a name="l00311"></a>00311 
<a name="l00312"></a>00312     <span class="comment">// Skip the data</span>
<a name="l00313"></a>00313     assert(<span class="keyword">sizeof</span>(ColorData) == 4*5);
<a name="l00314"></a><a class="code" href="classNif_1_1NiVisData.html">00314</a>     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(<span class="keyword">sizeof</span>(ColorData) * count);
<a name="l00315"></a>00315   }
<a name="l00316"></a>00316 };
<a name="l00317"></a><a class="code" href="classNif_1_1NiVisData.html#a53cc31681100e113216549239434b50f">00317</a> 
<a name="l00318"></a>00318 <span class="keyword">class </span><a class="code" href="classNif_1_1NiVisData.html">NiVisData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00319"></a>00319 {
<a name="l00320"></a>00320 <span class="keyword">public</span>:
<a name="l00321"></a>00321   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiVisData.html#a53cc31681100e113216549239434b50f" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00322"></a>00322   {
<a name="l00323"></a>00323     <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00324"></a>00324     <span class="comment">/*</span>
<a name="l00325"></a>00325 <span class="comment">      Each VisData consists of:</span>
<a name="l00326"></a>00326 <span class="comment">        float time;</span>
<a name="l00327"></a>00327 <span class="comment">        byte isSet;</span>
<a name="l00328"></a>00328 <span class="comment"></span>
<a name="l00329"></a>00329 <span class="comment">      If you implement this, make sure you use a packed struct</span>
<a name="l00330"></a>00330 <span class="comment">      (sizeof==5), or read each element individually.</span>
<a name="l00331"></a>00331 <span class="comment">     */</span>
<a name="l00332"></a><a class="code" href="classNif_1_1NiSkinInstance.html">00332</a>     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(count*5);
<a name="l00333"></a>00333   }
<a name="l00334"></a>00334 };
<a name="l00335"></a><a class="code" href="classNif_1_1NiSkinInstance.html#a8a433729a1c34781d70c9d4f0fe81977">00335</a> 
<a name="l00336"></a><a class="code" href="classNif_1_1NiSkinInstance.html#a9d3c15b0b0fe62fa49ccec5fc3f95409">00336</a> <span class="keyword">class </span><a class="code" href="classNif_1_1NiSkinInstance.html">NiSkinInstance</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00337"></a><a class="code" href="classNif_1_1NiSkinInstance.html#ae7abd260fc639712c01da9421a37137d">00337</a> {
<a name="l00338"></a>00338 <span class="keyword">public</span>:
<a name="l00339"></a><a class="code" href="classNif_1_1NiSkinInstance.html#a44444788a8aff0a9ebefaa2ed692b31e">00339</a>   <a class="code" href="classNif_1_1RecordPtrT.html">NiSkinDataPtr</a> <a class="code" href="classNif_1_1NiSkinInstance.html#a8a433729a1c34781d70c9d4f0fe81977">data</a>;
<a name="l00340"></a>00340   <a class="code" href="classNif_1_1RecordPtrT.html">NodePtr</a> <a class="code" href="classNif_1_1NiSkinInstance.html#a9d3c15b0b0fe62fa49ccec5fc3f95409">root</a>;
<a name="l00341"></a>00341   <a class="code" href="classNif_1_1RecordListT.html">NodeList</a> <a class="code" href="classNif_1_1NiSkinInstance.html#ae7abd260fc639712c01da9421a37137d">bones</a>;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiSkinInstance.html#a44444788a8aff0a9ebefaa2ed692b31e" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00344"></a>00344   {
<a name="l00345"></a>00345     <a class="code" href="classNif_1_1NiSkinInstance.html#a8a433729a1c34781d70c9d4f0fe81977">data</a>.<a class="code" href="classNif_1_1RecordPtrT.html#a90aae241a4cbecb28e56ae9c11401409" title="Read the index from the nif.">read</a>(nif);
<a name="l00346"></a>00346     <a class="code" href="classNif_1_1NiSkinInstance.html#a9d3c15b0b0fe62fa49ccec5fc3f95409">root</a>.<a class="code" href="classNif_1_1RecordPtrT.html#a90aae241a4cbecb28e56ae9c11401409" title="Read the index from the nif.">read</a>(nif);
<a name="l00347"></a>00347     <a class="code" href="classNif_1_1NiSkinInstance.html#ae7abd260fc639712c01da9421a37137d">bones</a>.<a class="code" href="classNif_1_1RecordListT.html#aaa5904e4a508625071547ce714955b5e">read</a>(nif);
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiSkinInstance.html#a8a433729a1c34781d70c9d4f0fe81977">data</a>.<a class="code" href="classNif_1_1RecordPtrT.html#a153b83aad63b3e8c43ee4c1a67227929" title="Pointers are allowed to be empty.">empty</a>() || <a class="code" href="classNif_1_1NiSkinInstance.html#a9d3c15b0b0fe62fa49ccec5fc3f95409">root</a>.<a class="code" href="classNif_1_1RecordPtrT.html#a153b83aad63b3e8c43ee4c1a67227929" title="Pointers are allowed to be empty.">empty</a>())
<a name="l00350"></a>00350       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;NiSkinInstance missing root or data&quot;</span>);
<a name="l00351"></a>00351   }
<a name="l00352"></a><a class="code" href="classNif_1_1NiSkinData.html">00352</a> 
<a name="l00353"></a>00353   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiSkinInstance.html#af54fe332429147b0a1435742a59da11e">post</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif);
<a name="l00354"></a>00354 };
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <span class="keyword">class </span><a class="code" href="classNif_1_1NiSkinData.html">NiSkinData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00357"></a>00357 {
<a name="l00358"></a>00358 <span class="keyword">public</span>:
<a name="l00359"></a>00359   <span class="comment">// This is to make sure the structs are packed, ie. that the</span>
<a name="l00360"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">00360</a>   <span class="comment">// compiler doesn&#39;t mess them up with extra alignment bytes.</span>
<a name="l00361"></a>00361 <span class="preprocessor">#pragma pack(push)</span>
<a name="l00362"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a6509b6e16db2b0deb8c4b0819c0f5f0c">00362</a> <span class="preprocessor"></span><span class="preprocessor">#pragma pack(1)</span>
<a name="l00363"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a2c7ddd2efc566056469a09854dd0b015">00363</a> <span class="preprocessor"></span>
<a name="l00364"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a26d24230129b05d8f05b850aa15d6151">00364</a>   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a>
<a name="l00365"></a>00365   {
<a name="l00366"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html">00366</a>     <a class="code" href="structNif_1_1Matrix.html">Matrix</a> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a6509b6e16db2b0deb8c4b0819c0f5f0c">rotation</a>; <span class="comment">// Rotation offset from bone?</span>
<a name="l00367"></a>00367     <a class="code" href="structNif_1_1Vector.html">Vector</a> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a2c7ddd2efc566056469a09854dd0b015">trans</a>;    <span class="comment">// Translation</span>
<a name="l00368"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#a56c868b4f86ea44dac5b311bc276d6db">00368</a>     <span class="keywordtype">float</span> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html#a26d24230129b05d8f05b850aa15d6151">scale</a>;     <span class="comment">// Probably scale (always 1)</span>
<a name="l00369"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#ae9e441875cb1574d87b2e39bfab17aaf">00369</a>   };
<a name="l00370"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#aa3ecdc63b8a2f8b9324904475e597230">00370</a>   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html">BoneTrafoCopy</a>
<a name="l00371"></a>00371   {
<a name="l00372"></a>00372           Ogre::Quaternion <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#a56c868b4f86ea44dac5b311bc276d6db">rotation</a>;
<a name="l00373"></a><a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html">00373</a>           Ogre::Vector3 <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#ae9e441875cb1574d87b2e39bfab17aaf">trans</a>;
<a name="l00374"></a>00374           <span class="keywordtype">float</span> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html#aa3ecdc63b8a2f8b9324904475e597230">scale</a>;
<a name="l00375"></a><a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html#a37b05a4c5498349242211d3b218b14cc">00375</a>   };
<a name="l00376"></a><a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html#af74e5ecd665f820b74eaf8623f637050">00376</a> 
<a name="l00377"></a>00377   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html">VertWeight</a>
<a name="l00378"></a>00378   {
<a name="l00379"></a>00379     <span class="keywordtype">short</span> <a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html#a37b05a4c5498349242211d3b218b14cc">vertex</a>;
<a name="l00380"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html">00380</a>     <span class="keywordtype">float</span> <a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html#af74e5ecd665f820b74eaf8623f637050">weight</a>;
<a name="l00381"></a>00381   };
<a name="l00382"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a2e02bb64436037fa101817d519a74c9c">00382</a> <span class="preprocessor">#pragma pack(pop)</span>
<a name="l00383"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a216b5f2f23ed7f2b74bc7b964ca06db5">00383</a> <span class="preprocessor"></span>
<a name="l00384"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#aae107a735540373a4ab11e89c59dc9a9">00384</a>   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html">BoneInfo</a>
<a name="l00385"></a>00385   {
<a name="l00386"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html">00386</a>     <span class="keyword">const</span> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a> *<a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a2e02bb64436037fa101817d519a74c9c">trafo</a>;
<a name="l00387"></a>00387     <span class="keyword">const</span> <a class="code" href="structNif_1_1Vector4.html">Vector4</a> *<a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a216b5f2f23ed7f2b74bc7b964ca06db5">unknown</a>;
<a name="l00388"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#acb80b60a52ad2548653ebad5e12bd90c">00388</a>     <a class="code" href="structMisc_1_1SliceArray.html">Misc::SliceArray&lt;VertWeight&gt;</a> <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#aae107a735540373a4ab11e89c59dc9a9">weights</a>;
<a name="l00389"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#af5d45bb2878a3d8c086671a6939615da">00389</a>   };
<a name="l00390"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#a74b7904e51e1d38c24bb7135f17d6621">00390</a>   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html">BoneInfoCopy</a>
<a name="l00391"></a><a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#a835fd7ef497ace7038a9cb922918bf3c">00391</a>   {
<a name="l00392"></a>00392            std::string <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#acb80b60a52ad2548653ebad5e12bd90c">bonename</a>;
<a name="l00393"></a>00393        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#af5d45bb2878a3d8c086671a6939615da">bonehandle</a>;
<a name="l00394"></a><a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html">00394</a>            <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafoCopy.html">BoneTrafoCopy</a> <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#a74b7904e51e1d38c24bb7135f17d6621">trafo</a>;
<a name="l00395"></a>00395            <a class="code" href="structNif_1_1Vector4.html">Vector4</a> <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfoCopy.html#a835fd7ef497ace7038a9cb922918bf3c">unknown</a>;
<a name="l00396"></a><a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html#a8286c5be2d8030b0cdec78735394e781">00396</a>        <span class="comment">//std::vector&lt;VertWeight&gt; weights;</span>
<a name="l00397"></a><a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html#ad3e44d31ff09b2417314679429295e1d">00397</a>   };
<a name="l00398"></a>00398   <span class="keyword">struct </span><a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html">IndividualWeight</a>
<a name="l00399"></a>00399   {
<a name="l00400"></a><a class="code" href="classNif_1_1NiSkinData.html#abd28959ff57296e6813d65afc0a4b83a">00400</a>       <span class="keywordtype">float</span> <a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html#a8286c5be2d8030b0cdec78735394e781">weight</a>;
<a name="l00401"></a><a class="code" href="classNif_1_1NiSkinData.html#a279c80e81a28ff71390b92111449bede">00401</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structNif_1_1NiSkinData_1_1IndividualWeight.html#ad3e44d31ff09b2417314679429295e1d">boneinfocopyindex</a>;
<a name="l00402"></a>00402   };
<a name="l00403"></a><a class="code" href="classNif_1_1NiSkinData.html#af5fb1b72364ac5ee576c12e3a580fb3a">00403</a> 
<a name="l00404"></a>00404   <span class="keyword">const</span> <a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a> *<a class="code" href="classNif_1_1NiSkinData.html#abd28959ff57296e6813d65afc0a4b83a">trafo</a>;
<a name="l00405"></a>00405   std::vector&lt;BoneInfo&gt; <a class="code" href="classNif_1_1NiSkinData.html#a279c80e81a28ff71390b92111449bede">bones</a>;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiSkinData.html#af5fb1b72364ac5ee576c12e3a580fb3a" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00408"></a>00408   {
<a name="l00409"></a>00409     assert(<span class="keyword">sizeof</span>(<a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a>) == 4*(9+3+1));
<a name="l00410"></a>00410     assert(<span class="keyword">sizeof</span>(<a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html">VertWeight</a>) == 6);
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <a class="code" href="classNif_1_1NiSkinData.html#abd28959ff57296e6813d65afc0a4b83a">trafo</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9be7f6b484b67d81d922db7061bc42bd">getPtr</a>&lt;<a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a>&gt;();
<a name="l00413"></a>00413 
<a name="l00414"></a>00414     <span class="keywordtype">int</span> boneNum = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00415"></a>00415     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>(); <span class="comment">// -1</span>
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <a class="code" href="classNif_1_1NiSkinData.html#a279c80e81a28ff71390b92111449bede">bones</a>.resize(boneNum);
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;boneNum;i++)
<a name="l00420"></a>00420       {
<a name="l00421"></a>00421         <a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html">BoneInfo</a> &amp;bi = <a class="code" href="classNif_1_1NiSkinData.html#a279c80e81a28ff71390b92111449bede">bones</a>[i];
<a name="l00422"></a>00422 
<a name="l00423"></a>00423         bi.<a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a2e02bb64436037fa101817d519a74c9c">trafo</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9be7f6b484b67d81d922db7061bc42bd">getPtr</a>&lt;<a class="code" href="structNif_1_1NiSkinData_1_1BoneTrafo.html">BoneTrafo</a>&gt;();
<a name="l00424"></a>00424         bi.<a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#a216b5f2f23ed7f2b74bc7b964ca06db5">unknown</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae0c3940d6952b5164ad0748d16ffac95">getVector4</a>();
<a name="l00425"></a>00425 
<a name="l00426"></a>00426         <span class="comment">// Number of vertex weights</span>
<a name="l00427"></a>00427         <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#abb8f4b45d684533ef57564bb525bd9bb">getShort</a>();
<a name="l00428"></a>00428         bi.<a class="code" href="structNif_1_1NiSkinData_1_1BoneInfo.html#aae107a735540373a4ab11e89c59dc9a9">weights</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ad1c2d5a2d96b5095158992958eb23288">getArrayLen</a>&lt;<a class="code" href="structNif_1_1NiSkinData_1_1VertWeight.html">VertWeight</a>&gt;(count);
<a name="l00429"></a><a class="code" href="classNif_1_1NiMorphData.html">00429</a>       }
<a name="l00430"></a>00430   }
<a name="l00431"></a><a class="code" href="classNif_1_1NiMorphData.html#a90c427e46b738df9ed2590b0adde470e">00431</a> };
<a name="l00432"></a><a class="code" href="classNif_1_1NiMorphData.html#a0dd9694d39c08cc9547ba7abd035d398">00432</a> 
<a name="l00433"></a><a class="code" href="classNif_1_1NiMorphData.html#a93bab16e008b9cee128fdb2c3fc3dc24">00433</a> <span class="keyword">class </span><a class="code" href="classNif_1_1NiMorphData.html">NiMorphData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00434"></a><a class="code" href="classNif_1_1NiMorphData.html#a28624b393649add5013567e4a6243686">00434</a> {
<a name="l00435"></a><a class="code" href="classNif_1_1NiMorphData.html#a21b1ebcdf47d355c8468bf3c9c61f8d0">00435</a>         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiMorphData.html#a90c427e46b738df9ed2590b0adde470e">startTime</a>;
<a name="l00436"></a><a class="code" href="classNif_1_1NiMorphData.html#af8b085da3c1324c3c7e4a7b5e4bcee3f">00436</a>         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiMorphData.html#a0dd9694d39c08cc9547ba7abd035d398">stopTime</a>;
<a name="l00437"></a>00437         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiMorphData.html#a93bab16e008b9cee128fdb2c3fc3dc24">initialVertices</a>;
<a name="l00438"></a>00438         std::vector&lt;std::vector&lt;float&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#a28624b393649add5013567e4a6243686">relevantTimes</a>;
<a name="l00439"></a>00439         std::vector&lt;std::vector&lt;Ogre::Vector3&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#a21b1ebcdf47d355c8468bf3c9c61f8d0">relevantData</a>;
<a name="l00440"></a><a class="code" href="classNif_1_1NiMorphData.html#a7d432079add53f6238d31956fd058d8f">00440</a>         std::vector&lt;std::vector&lt;Ogre::Vector3&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#af8b085da3c1324c3c7e4a7b5e4bcee3f">additionalVertices</a>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442 
<a name="l00443"></a><a class="code" href="classNif_1_1NiMorphData.html#a7b16c3494327a1b180fc6adbaf8e3025">00443</a> <span class="keyword">public</span>:
<a name="l00444"></a>00444           <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiMorphData.html#a7d432079add53f6238d31956fd058d8f">getStartTime</a>(){
<a name="l00445"></a>00445              <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#a90c427e46b738df9ed2590b0adde470e">startTime</a>;
<a name="l00446"></a><a class="code" href="classNif_1_1NiMorphData.html#a60cd8f529b4dc0d0577b942aac28af7b">00446</a>           }
<a name="l00447"></a>00447           <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiMorphData.html#a7b16c3494327a1b180fc6adbaf8e3025">getStopTime</a>(){
<a name="l00448"></a>00448               <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#a0dd9694d39c08cc9547ba7abd035d398">stopTime</a>;
<a name="l00449"></a>00449           }
<a name="l00450"></a><a class="code" href="classNif_1_1NiMorphData.html#a2c9d551e01fed836d1e4100b3a6b897a">00450</a>           <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiMorphData.html#a60cd8f529b4dc0d0577b942aac28af7b">setStartTime</a>(<span class="keywordtype">float</span> time){
<a name="l00451"></a>00451                         <a class="code" href="classNif_1_1NiMorphData.html#a90c427e46b738df9ed2590b0adde470e">startTime</a> = time;
<a name="l00452"></a>00452           }
<a name="l00453"></a><a class="code" href="classNif_1_1NiMorphData.html#ac0c8b6f04d8a4a10bd791dfbcd6a68d2">00453</a> 
<a name="l00454"></a>00454           <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiMorphData.html#a2c9d551e01fed836d1e4100b3a6b897a">setStopTime</a>(<span class="keywordtype">float</span> time){
<a name="l00455"></a>00455                         <a class="code" href="classNif_1_1NiMorphData.html#a0dd9694d39c08cc9547ba7abd035d398">stopTime</a> = time;
<a name="l00456"></a><a class="code" href="classNif_1_1NiMorphData.html#ae018a73b3df3d6d8ee034c3113e363b2">00456</a>           }
<a name="l00457"></a>00457           std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiMorphData.html#ac0c8b6f04d8a4a10bd791dfbcd6a68d2">getInitialVertices</a>(){
<a name="l00458"></a>00458                         <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#a93bab16e008b9cee128fdb2c3fc3dc24">initialVertices</a>;
<a name="l00459"></a><a class="code" href="classNif_1_1NiMorphData.html#afb3ef5f58eab8412292c8b46b824f7c2">00459</a>           }
<a name="l00460"></a>00460           std::vector&lt;std::vector&lt;Ogre::Vector3&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#ae018a73b3df3d6d8ee034c3113e363b2">getRelevantData</a>(){
<a name="l00461"></a>00461                         <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#a21b1ebcdf47d355c8468bf3c9c61f8d0">relevantData</a>;
<a name="l00462"></a><a class="code" href="classNif_1_1NiMorphData.html#a7c167990a0f16b25533c98ba2a75e081">00462</a>           }
<a name="l00463"></a>00463           std::vector&lt;std::vector&lt;float&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#afb3ef5f58eab8412292c8b46b824f7c2">getRelevantTimes</a>(){
<a name="l00464"></a>00464                         <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#a28624b393649add5013567e4a6243686">relevantTimes</a>;
<a name="l00465"></a>00465           }
<a name="l00466"></a><a class="code" href="classNif_1_1NiMorphData.html#acfebafd5303fead625fd3da93520c4b1">00466</a>            std::vector&lt;std::vector&lt;Ogre::Vector3&gt; &gt; <a class="code" href="classNif_1_1NiMorphData.html#a7c167990a0f16b25533c98ba2a75e081">getAdditionalVertices</a>(){
<a name="l00467"></a>00467                         <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiMorphData.html#af8b085da3c1324c3c7e4a7b5e4bcee3f">additionalVertices</a>;
<a name="l00468"></a>00468           }
<a name="l00469"></a>00469           
<a name="l00470"></a>00470 <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiMorphData.html#acfebafd5303fead625fd3da93520c4b1" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00471"></a>00471   {
<a name="l00472"></a>00472     <span class="keywordtype">int</span> morphCount = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00473"></a>00473     <span class="keywordtype">int</span> vertCount  = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00474"></a>00474     nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a23f773a6b68454f026f1f7089c171d22">getByte</a>();
<a name="l00475"></a>00475         <span class="keywordtype">int</span> magic = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00476"></a>00476         <span class="comment">/*int type =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00477"></a>00477         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vertCount; i++){
<a name="l00478"></a>00478 
<a name="l00479"></a>00479                 <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00480"></a>00480                 <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00481"></a>00481                 <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00482"></a>00482                 <a class="code" href="classNif_1_1NiMorphData.html#a93bab16e008b9cee128fdb2c3fc3dc24">initialVertices</a>.push_back(Ogre::Vector3(x, y, z));
<a name="l00483"></a>00483         }
<a name="l00484"></a>00484         
<a name="l00485"></a>00485     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;morphCount; i++)
<a name="l00486"></a>00486     {
<a name="l00487"></a>00487         magic = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00488"></a>00488         <span class="comment">/*type =*/</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00489"></a>00489                 std::vector&lt;Ogre::Vector3&gt; current;
<a name="l00490"></a>00490                 std::vector&lt;float&gt; currentTime;
<a name="l00491"></a>00491         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; magic; i++){
<a name="l00492"></a>00492         <span class="comment">// Time, data, forward, backward tangents</span>
<a name="l00493"></a>00493                 <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00494"></a>00494                     <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00495"></a>00495                     <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00496"></a>00496                     <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00497"></a>00497                     current.push_back(Ogre::Vector3(x,y,z));
<a name="l00498"></a>00498                     currentTime.push_back(time);
<a name="l00499"></a>00499           <span class="comment">//nif-&gt;getFloatLen(4*magic);</span>
<a name="l00500"></a>00500                 }
<a name="l00501"></a>00501                 <span class="keywordflow">if</span>(magic){
<a name="l00502"></a>00502                         <a class="code" href="classNif_1_1NiMorphData.html#a21b1ebcdf47d355c8468bf3c9c61f8d0">relevantData</a>.push_back(current);
<a name="l00503"></a>00503                         <a class="code" href="classNif_1_1NiMorphData.html#a28624b393649add5013567e4a6243686">relevantTimes</a>.push_back(currentTime);
<a name="l00504"></a>00504                 }
<a name="l00505"></a>00505                 std::vector&lt;Ogre::Vector3&gt; verts;
<a name="l00506"></a>00506         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vertCount; i++){
<a name="l00507"></a>00507                     <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00508"></a>00508                     <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00509"></a>00509                     <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00510"></a>00510                     verts.push_back(Ogre::Vector3(x, y, z));
<a name="l00511"></a>00511                 }
<a name="l00512"></a>00512                 <a class="code" href="classNif_1_1NiMorphData.html#af8b085da3c1324c3c7e4a7b5e4bcee3f">additionalVertices</a>.push_back(verts);
<a name="l00513"></a>00513       }
<a name="l00514"></a><a class="code" href="classNif_1_1NiKeyframeData.html">00514</a>   }
<a name="l00515"></a>00515 };
<a name="l00516"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a5f99937850ffc1c3da7ec27e5eff290a">00516</a> 
<a name="l00517"></a>00517 
<a name="l00518"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">00518</a> <span class="keyword">class </span><a class="code" href="classNif_1_1NiKeyframeData.html">NiKeyframeData</a> : <span class="keyword">public</span> <a class="code" href="structNif_1_1Record.html" title="Base class for all records.">Record</a>
<a name="l00519"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a6ba13ef161bd10b89d03a7454874f3c5">00519</a> {
<a name="l00520"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">00520</a>         std::string <a class="code" href="classNif_1_1NiKeyframeData.html#a5f99937850ffc1c3da7ec27e5eff290a">bonename</a>;
<a name="l00521"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a30f755d6ee82f7a3a3f8fac2c78b3ba4">00521</a>         <span class="comment">//Rotations</span>
<a name="l00522"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a7346883f98b2009f20c2bfc33e1649f3">00522</a>         std::vector&lt;Ogre::Quaternion&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">quats</a>;
<a name="l00523"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">00523</a>         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a6ba13ef161bd10b89d03a7454874f3c5">tbc</a>;
<a name="l00524"></a>00524         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">rottime</a>;
<a name="l00525"></a>00525         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a30f755d6ee82f7a3a3f8fac2c78b3ba4">startTime</a>;
<a name="l00526"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">00526</a>         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a7346883f98b2009f20c2bfc33e1649f3">stopTime</a>;
<a name="l00527"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a89067fcef610eeeafd0fb5737717151a">00527</a>         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a>;
<a name="l00528"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a4f1a8ead5a3678298b5b5f2545ce8b3f">00528</a> 
<a name="l00529"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a704008988e0b7149909ecaf1364a9fec">00529</a>         <span class="comment">//Translations</span>
<a name="l00530"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">00530</a>         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a>;
<a name="l00531"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">00531</a>         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a89067fcef610eeeafd0fb5737717151a">translist2</a>;
<a name="l00532"></a>00532         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a4f1a8ead5a3678298b5b5f2545ce8b3f">translist3</a>;
<a name="l00533"></a>00533         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a704008988e0b7149909ecaf1364a9fec">transtbc</a>;
<a name="l00534"></a>00534         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a>;
<a name="l00535"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a6ddb737beb7f32147899e1a12e2b8fee">00535</a>         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a>;
<a name="l00536"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ad59a265b997a40c819265190d96ab89e">00536</a> 
<a name="l00537"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a48daab0108676528635a8cfabefa20e4">00537</a>         <span class="comment">//Scalings</span>
<a name="l00538"></a><a class="code" href="classNif_1_1NiKeyframeData.html#adae79fdc7fb2d03db8c35b91c69a64c7">00538</a> 
<a name="l00539"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ad7c2e40e8fcdf8b50559b0d8ef4ffb13">00539</a>         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a6ddb737beb7f32147899e1a12e2b8fee">scalefactor</a>;
<a name="l00540"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">00540</a>         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ad59a265b997a40c819265190d96ab89e">scaletime</a>;
<a name="l00541"></a>00541         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a48daab0108676528635a8cfabefa20e4">forwards</a>;
<a name="l00542"></a>00542         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#adae79fdc7fb2d03db8c35b91c69a64c7">backwards</a>;
<a name="l00543"></a>00543         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ad7c2e40e8fcdf8b50559b0d8ef4ffb13">tbcscale</a>;
<a name="l00544"></a>00544         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a>;
<a name="l00545"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a95e02188dce83f95ebcfa29a73d9ba77">00545</a> 
<a name="l00546"></a>00546         
<a name="l00547"></a>00547         
<a name="l00548"></a>00548 <span class="keyword">public</span>:
<a name="l00549"></a>00549         <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a95e02188dce83f95ebcfa29a73d9ba77">clone</a>(<a class="code" href="classNif_1_1NiKeyframeData.html">NiKeyframeData</a> c)
<a name="l00550"></a>00550         {
<a name="l00551"></a>00551                 <a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">quats</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#ab12e7dd200562873ea92322187d18930">getQuat</a>();
<a name="l00552"></a>00552                 <a class="code" href="classNif_1_1NiKeyframeData.html#a6ba13ef161bd10b89d03a7454874f3c5">tbc</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#a3d670124d4db016d3f4d1e62f74426d0">getrTbc</a>();
<a name="l00553"></a>00553                 <a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">rottime</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#ac10804ac65471e3467103d2467cfb845">getrTime</a>();
<a name="l00554"></a>00554 
<a name="l00555"></a>00555                 <span class="comment">//types</span>
<a name="l00556"></a>00556                 <a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#aa8dfed363b7cc8d990e14770a81ba18f">getTtype</a>();
<a name="l00557"></a>00557                 <a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#a4e98f8f801a786ff232c83f225001285">getRtype</a>();
<a name="l00558"></a>00558                 <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#a99d5683b9c8b79f7d530242d29a3a8de">getStype</a>();
<a name="l00559"></a>00559 
<a name="l00560"></a>00560 
<a name="l00561"></a>00561                 <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#acb9d86221218c550302155f9bcfc226e">getTranslist1</a>();
<a name="l00562"></a>00562                 <a class="code" href="classNif_1_1NiKeyframeData.html#a89067fcef610eeeafd0fb5737717151a">translist2</a> =    c.<a class="code" href="classNif_1_1NiKeyframeData.html#a6450436b9a475967bb96d9b19e16e9c1">getTranslist2</a>();      
<a name="l00563"></a>00563         <a class="code" href="classNif_1_1NiKeyframeData.html#a4f1a8ead5a3678298b5b5f2545ce8b3f">translist3</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#ad4fce999054897e10faf3aceb2dd3352">getTranslist3</a>();
<a name="l00564"></a>00564 
<a name="l00565"></a>00565             <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#a8fb2c7a385d52b2ddaef8b20ad703e89">gettTime</a>();
<a name="l00566"></a>00566            
<a name="l00567"></a>00567             <a class="code" href="classNif_1_1NiKeyframeData.html#a5f99937850ffc1c3da7ec27e5eff290a">bonename</a> = c.<a class="code" href="classNif_1_1NiKeyframeData.html#a2c3cf2462ede940a711011a98100ca0a">getBonename</a>();
<a name="l00568"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a8a3e4392fa92e2c6b5cf97f87b6e360a">00568</a> 
<a name="l00569"></a>00569 
<a name="l00570"></a>00570         }
<a name="l00571"></a>00571 
<a name="l00572"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a6d38c23957f06faa7d6a8abb33e99a44">00572</a>         <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a8a3e4392fa92e2c6b5cf97f87b6e360a">setBonename</a>(std::string bone)
<a name="l00573"></a>00573         {
<a name="l00574"></a>00574                 <a class="code" href="classNif_1_1NiKeyframeData.html#a5f99937850ffc1c3da7ec27e5eff290a">bonename</a> = bone;
<a name="l00575"></a>00575         }
<a name="l00576"></a><a class="code" href="classNif_1_1NiKeyframeData.html#abe363717b24d91489e8db75fca92b239">00576</a>         <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a6d38c23957f06faa7d6a8abb33e99a44">setStartTime</a>(<span class="keywordtype">float</span> start)
<a name="l00577"></a>00577         {
<a name="l00578"></a>00578                 <a class="code" href="classNif_1_1NiKeyframeData.html#a30f755d6ee82f7a3a3f8fac2c78b3ba4">startTime</a> = start;
<a name="l00579"></a>00579         }
<a name="l00580"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a8bacc75dd460444b7bd271abd2142f04">00580</a>         <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiKeyframeData.html#abe363717b24d91489e8db75fca92b239">setStopTime</a>(<span class="keywordtype">float</span> end)
<a name="l00581"></a>00581         {
<a name="l00582"></a>00582                 <a class="code" href="classNif_1_1NiKeyframeData.html#a7346883f98b2009f20c2bfc33e1649f3">stopTime</a> = end;
<a name="l00583"></a>00583         }
<a name="l00584"></a>00584   <span class="keywordtype">void</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a8bacc75dd460444b7bd271abd2142f04" title="Parses the record from file.">read</a>(<a class="code" href="classNif_1_1NIFFile.html">NIFFile</a> *nif)
<a name="l00585"></a>00585   {
<a name="l00586"></a>00586     <span class="comment">// Rotations first</span>
<a name="l00587"></a>00587     <span class="keywordtype">int</span> count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00588"></a>00588         <span class="comment">//std::vector&lt;Ogre::Quaternion&gt; quat(count);</span>
<a name="l00589"></a>00589         <span class="comment">//std::vector&lt;float&gt; rottime(count);</span>
<a name="l00590"></a>00590     <span class="keywordflow">if</span>(count)
<a name="l00591"></a>00591       {
<a name="l00592"></a>00592 
<a name="l00593"></a>00593                 <span class="comment">//TYPE1  LINEAR_KEY</span>
<a name="l00594"></a>00594                 <span class="comment">//TYPE2  QUADRATIC_KEY</span>
<a name="l00595"></a>00595                 <span class="comment">//TYPE3  TBC_KEY</span>
<a name="l00596"></a>00596                 <span class="comment">//TYPE4  XYZ_ROTATION_KEY</span>
<a name="l00597"></a>00597                 <span class="comment">//TYPE5  UNKNOWN_KEY</span>
<a name="l00598"></a>00598         <a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00599"></a>00599                     <span class="comment">//std::cout &lt;&lt; &quot;Count: &quot; &lt;&lt; count &lt;&lt; &quot;Type: &quot; &lt;&lt; type &lt;&lt; &quot;\n&quot;;</span>
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a> == 1)
<a name="l00602"></a>00602                 {
<a name="l00603"></a>00603                         <span class="comment">//We need to actually read in these values instead of skipping them</span>
<a name="l00604"></a>00604                         <span class="comment">//nif-&gt;skip(count*4*5); // time + quaternion</span>
<a name="l00605"></a>00605                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {
<a name="l00606"></a>00606                             <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00607"></a>00607                             <span class="keywordtype">float</span> w = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00608"></a>00608                             <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00609"></a>00609                             <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00610"></a>00610                             <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00611"></a>00611                                 Ogre::Quaternion quat = Ogre::Quaternion(Ogre::Real(w), Ogre::Real(x), Ogre::Real(y), Ogre::Real(z));
<a name="l00612"></a>00612                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">quats</a>.push_back(quat);
<a name="l00613"></a>00613                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">rottime</a>.push_back(time);
<a name="l00614"></a>00614                                 <span class="comment">//if(time == 0.0 || time &gt; 355.5) </span>
<a name="l00615"></a>00615                                         <span class="comment">// std::cout &lt;&lt;&quot;Time:&quot; &lt;&lt; time &lt;&lt; &quot;W:&quot; &lt;&lt; w &lt;&lt;&quot;X:&quot; &lt;&lt; x &lt;&lt; &quot;Y:&quot; &lt;&lt; y &lt;&lt; &quot;Z:&quot; &lt;&lt; z &lt;&lt; &quot;\n&quot;;</span>
<a name="l00616"></a>00616                         }
<a name="l00617"></a>00617                 }
<a name="l00618"></a>00618         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a> == 3)
<a name="l00619"></a>00619                 {                  <span class="comment">//Example - node 116 in base_anim.nif</span>
<a name="l00620"></a>00620                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {
<a name="l00621"></a>00621                             <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00622"></a>00622                             <span class="keywordtype">float</span> w = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00623"></a>00623                             <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00624"></a>00624                             <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00625"></a>00625                             <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00626"></a>00626 
<a name="l00627"></a>00627                                 <span class="keywordtype">float</span> tbcx = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00628"></a>00628                                 <span class="keywordtype">float</span> tbcy = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00629"></a>00629                                 <span class="keywordtype">float</span> tbcz = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00630"></a>00630                                 Ogre::Quaternion quat = Ogre::Quaternion(Ogre::Real(w), Ogre::Real(x), Ogre::Real(y), Ogre::Real(z));
<a name="l00631"></a>00631                                 Ogre::Vector3 vec = Ogre::Vector3(tbcx, tbcy, tbcz);
<a name="l00632"></a>00632                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">quats</a>.push_back(quat);
<a name="l00633"></a>00633                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">rottime</a>.push_back(time);
<a name="l00634"></a>00634                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a6ba13ef161bd10b89d03a7454874f3c5">tbc</a>.push_back(vec);
<a name="l00635"></a>00635                                 <span class="comment">//if(time == 0.0 || time &gt; 355.5) </span>
<a name="l00636"></a>00636                                         <span class="comment">// std::cout &lt;&lt;&quot;Time:&quot; &lt;&lt; time &lt;&lt; &quot;W:&quot; &lt;&lt; w &lt;&lt;&quot;X:&quot; &lt;&lt; x &lt;&lt; &quot;Y:&quot; &lt;&lt; y &lt;&lt; &quot;Z:&quot; &lt;&lt; z &lt;&lt; &quot;\n&quot;;</span>
<a name="l00637"></a>00637                         }
<a name="l00638"></a>00638 
<a name="l00639"></a>00639           <span class="comment">//nif-&gt;skip(count*4*8); // rot1 + tension+bias+continuity</span>
<a name="l00640"></a>00640                 }
<a name="l00641"></a>00641         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a> == 4)
<a name="l00642"></a>00642           {
<a name="l00643"></a>00643             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;count;j++)
<a name="l00644"></a>00644               {
<a name="l00645"></a>00645                 nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>(); <span class="comment">// time</span>
<a name="l00646"></a>00646                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;3; i++)
<a name="l00647"></a>00647                   {
<a name="l00648"></a>00648                     <span class="keywordtype">int</span> cnt = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00649"></a>00649                     <span class="keywordtype">int</span> type = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00650"></a>00650                     <span class="keywordflow">if</span>(type == 1)
<a name="l00651"></a>00651                       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(cnt*4*2); <span class="comment">// time + unknown</span>
<a name="l00652"></a>00652                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type == 2)
<a name="l00653"></a>00653                       nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a9a2247fbeae6cee63033db9eb6eed134">skip</a>(cnt*4*4); <span class="comment">// time + unknown vector</span>
<a name="l00654"></a>00654                     <span class="keywordflow">else</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;Unknown sub-rotation type&quot;</span>);
<a name="l00655"></a>00655                   }
<a name="l00656"></a>00656               }
<a name="l00657"></a>00657           }
<a name="l00658"></a>00658         <span class="keywordflow">else</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;Unknown rotation type in NiKeyframeData&quot;</span>);
<a name="l00659"></a>00659       }
<a name="l00660"></a>00660         <span class="comment">//first = false;</span>
<a name="l00661"></a>00661 
<a name="l00662"></a>00662     <span class="comment">// Then translation</span>
<a name="l00663"></a>00663     count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00664"></a>00664         
<a name="l00665"></a>00665     <span class="keywordflow">if</span>(count)
<a name="l00666"></a>00666       {
<a name="l00667"></a>00667        <a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00668"></a>00668 
<a name="l00669"></a>00669                 <span class="comment">//std::cout &lt;&lt; &quot;TransCount:&quot; &lt;&lt; count &lt;&lt; &quot; Type: &quot; &lt;&lt; type &lt;&lt; &quot;\n&quot;;</span>
<a name="l00670"></a>00670         <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a> == 1) {
<a name="l00671"></a>00671                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {
<a name="l00672"></a>00672                                 <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00673"></a>00673                                 <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00674"></a>00674                                 <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00675"></a>00675                                 <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00676"></a>00676                                 Ogre::Vector3 trans = Ogre::Vector3(x, y, z);
<a name="l00677"></a>00677                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a>.push_back(trans);
<a name="l00678"></a>00678                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a>.push_back(time);
<a name="l00679"></a>00679                         }
<a name="l00680"></a>00680                         <span class="comment">//nif-&gt;getFloatLen(count*4); // time + translation</span>
<a name="l00681"></a>00681                 }
<a name="l00682"></a>00682         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a> == 2)
<a name="l00683"></a>00683                 {                                        <span class="comment">//Example - node 116 in base_anim.nif</span>
<a name="l00684"></a>00684                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {
<a name="l00685"></a>00685                                 <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00686"></a>00686                                 <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00687"></a>00687                                 <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00688"></a>00688                                 <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00689"></a>00689                                 <span class="keywordtype">float</span> x2 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00690"></a>00690                                 <span class="keywordtype">float</span> y2 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00691"></a>00691                                 <span class="keywordtype">float</span> z2 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00692"></a>00692                                 <span class="keywordtype">float</span> x3 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00693"></a>00693                                 <span class="keywordtype">float</span> y3 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00694"></a>00694                                 <span class="keywordtype">float</span> z3 = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00695"></a>00695                                 Ogre::Vector3 trans = Ogre::Vector3(x, y, z);
<a name="l00696"></a>00696                                 Ogre::Vector3 trans2 = Ogre::Vector3(x2, y2, z2);
<a name="l00697"></a>00697                                 Ogre::Vector3 trans3 = Ogre::Vector3(x3, y3, z3);
<a name="l00698"></a>00698                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a>.push_back(time);
<a name="l00699"></a>00699                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a>.push_back(trans);
<a name="l00700"></a>00700                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a89067fcef610eeeafd0fb5737717151a">translist2</a>.push_back(trans2);
<a name="l00701"></a>00701                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a4f1a8ead5a3678298b5b5f2545ce8b3f">translist3</a>.push_back(trans3);
<a name="l00702"></a>00702                         }
<a name="l00703"></a>00703                         
<a name="l00704"></a>00704                         <span class="comment">//nif-&gt;getFloatLen(count*10); // trans1 + forward + backward</span>
<a name="l00705"></a>00705                 }
<a name="l00706"></a>00706         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a> == 3){
<a name="l00707"></a>00707                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; count; i++) {
<a name="l00708"></a>00708                                 <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00709"></a>00709                                 <span class="keywordtype">float</span> x = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00710"></a>00710                                 <span class="keywordtype">float</span> y = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00711"></a>00711                                 <span class="keywordtype">float</span> z = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00712"></a>00712                                 <span class="keywordtype">float</span> t = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00713"></a>00713                                 <span class="keywordtype">float</span> b = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00714"></a>00714                                 <span class="keywordtype">float</span> c = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00715"></a>00715                                 Ogre::Vector3 trans = Ogre::Vector3(x, y, z);
<a name="l00716"></a>00716                                 Ogre::Vector3 <a class="code" href="classNif_1_1NiKeyframeData.html#a6ba13ef161bd10b89d03a7454874f3c5">tbc</a> = Ogre::Vector3(t, b, c);
<a name="l00717"></a>00717                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a>.push_back(trans);
<a name="l00718"></a>00718                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a704008988e0b7149909ecaf1364a9fec">transtbc</a>.push_back(tbc);
<a name="l00719"></a>00719                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a>.push_back(time);
<a name="l00720"></a>00720                         }
<a name="l00721"></a>00721           <span class="comment">//nif-&gt;getFloatLen(count*7); // trans1 + tension,bias,continuity</span>
<a name="l00722"></a>00722                 }
<a name="l00723"></a>00723         <span class="keywordflow">else</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;Unknown translation type&quot;</span>);
<a name="l00724"></a>00724       }
<a name="l00725"></a>00725 
<a name="l00726"></a>00726     <span class="comment">// Finally, scalings</span>
<a name="l00727"></a>00727     count = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00728"></a>00728     <span class="keywordflow">if</span>(count)
<a name="l00729"></a>00729       {
<a name="l00730"></a>00730         <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#aa6bd631400b0261ee51ed549ae6aa672">getInt</a>();
<a name="l00731"></a>00731 
<a name="l00732"></a>00732                 
<a name="l00733"></a>00733                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; count; i++){
<a name="l00734"></a>00734                                         
<a name="l00735"></a>00735                                 
<a name="l00736"></a>00736         <span class="comment">//int size = 0;</span>
<a name="l00737"></a>00737         <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> &gt;= 1 &amp;&amp; <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> &lt; 4) 
<a name="l00738"></a>00738                         {
<a name="l00739"></a>00739                                 <span class="keywordtype">float</span> time = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00740"></a>00740                                 <span class="keywordtype">float</span> scale = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00741"></a>00741                                 <a class="code" href="classNif_1_1NiKeyframeData.html#ad59a265b997a40c819265190d96ab89e">scaletime</a>.push_back(time);
<a name="l00742"></a>00742                                 <a class="code" href="classNif_1_1NiKeyframeData.html#a6ddb737beb7f32147899e1a12e2b8fee">scalefactor</a>.push_back(scale);
<a name="l00743"></a>00743                                 <span class="comment">//size = 2; // time+scale</span>
<a name="l00744"></a>00744                         }
<a name="l00745"></a>00745                 <span class="keywordflow">else</span> nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#a5866189e6fe1e24bcf1ea7a61a72b191" title="Used for error handling.">fail</a>(<span class="stringliteral">&quot;Unknown scaling type&quot;</span>);
<a name="l00746"></a>00746          <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> == 2){
<a name="l00747"></a>00747                         <span class="comment">//size = 4; // 1 + forward + backward (floats)</span>
<a name="l00748"></a>00748                         <span class="keywordtype">float</span> forward = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00749"></a>00749                         <span class="keywordtype">float</span> backward = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00750"></a>00750                         <a class="code" href="classNif_1_1NiKeyframeData.html#a48daab0108676528635a8cfabefa20e4">forwards</a>.push_back(forward);
<a name="l00751"></a>00751                         <a class="code" href="classNif_1_1NiKeyframeData.html#adae79fdc7fb2d03db8c35b91c69a64c7">backwards</a>.push_back(backward);
<a name="l00752"></a>00752                 }
<a name="l00753"></a>00753                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> == 3){
<a name="l00754"></a>00754                         <span class="keywordtype">float</span> tbcx = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00755"></a>00755                         <span class="keywordtype">float</span> tbcy = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00756"></a>00756                         <span class="keywordtype">float</span> tbcz = nif-&gt;<a class="code" href="classNif_1_1NIFFile.html#ae00b58ce6a80a20f458ee313e7e5f05c">getFloat</a>();
<a name="l00757"></a>00757                         Ogre::Vector3 vec = Ogre::Vector3(tbcx, tbcy, tbcz);
<a name="l00758"></a>00758                         <a class="code" href="classNif_1_1NiKeyframeData.html#ad7c2e40e8fcdf8b50559b0d8ef4ffb13">tbcscale</a>.push_back(vec);
<a name="l00759"></a>00759 
<a name="l00760"></a>00760                         <span class="comment">//size = 5; // 1 + tbc</span>
<a name="l00761"></a>00761                 }
<a name="l00762"></a>00762         
<a name="l00763"></a>00763                 }
<a name="l00764"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a4e98f8f801a786ff232c83f225001285">00764</a>       }
<a name="l00765"></a>00765           <span class="keywordflow">else</span> 
<a name="l00766"></a>00766                   <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a> = 0;
<a name="l00767"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a99d5683b9c8b79f7d530242d29a3a8de">00767</a>   }
<a name="l00768"></a>00768         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a4e98f8f801a786ff232c83f225001285">getRtype</a>(){
<a name="l00769"></a>00769                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a3ea118567eb2b33b6a08a462883eda0c">rtype</a>;
<a name="l00770"></a><a class="code" href="classNif_1_1NiKeyframeData.html#aa8dfed363b7cc8d990e14770a81ba18f">00770</a>         }
<a name="l00771"></a>00771         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a99d5683b9c8b79f7d530242d29a3a8de">getStype</a>(){
<a name="l00772"></a>00772                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a4d76b6a4b4ded262593095558278b6b5">stype</a>;
<a name="l00773"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a1dc67a1b7b615a33be4a270c2c389ba9">00773</a>         }
<a name="l00774"></a>00774         <span class="keywordtype">int</span> <a class="code" href="classNif_1_1NiKeyframeData.html#aa8dfed363b7cc8d990e14770a81ba18f">getTtype</a>(){
<a name="l00775"></a>00775                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a72cbc952ca94e2bdb8745169dfa6ad37">ttype</a>;
<a name="l00776"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ad7f6c376336564e8ad57dd97ba1b4ca7">00776</a>         }
<a name="l00777"></a>00777         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a1dc67a1b7b615a33be4a270c2c389ba9">getStartTime</a>(){
<a name="l00778"></a>00778                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a30f755d6ee82f7a3a3f8fac2c78b3ba4">startTime</a>;
<a name="l00779"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ab12e7dd200562873ea92322187d18930">00779</a>         }
<a name="l00780"></a>00780         <span class="keywordtype">float</span> <a class="code" href="classNif_1_1NiKeyframeData.html#ad7f6c376336564e8ad57dd97ba1b4ca7">getStopTime</a>(){
<a name="l00781"></a>00781                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a7346883f98b2009f20c2bfc33e1649f3">stopTime</a>;
<a name="l00782"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a3d670124d4db016d3f4d1e62f74426d0">00782</a>         }
<a name="l00783"></a>00783         std::vector&lt;Ogre::Quaternion&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ab12e7dd200562873ea92322187d18930">getQuat</a>(){
<a name="l00784"></a>00784                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a1230d54fb6235d0d10e423e1690120ff">quats</a>;
<a name="l00785"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ac10804ac65471e3467103d2467cfb845">00785</a>         }
<a name="l00786"></a>00786         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a3d670124d4db016d3f4d1e62f74426d0">getrTbc</a>(){
<a name="l00787"></a>00787                 <span class="keywordflow">return</span> tbc;
<a name="l00788"></a>00788         }
<a name="l00789"></a><a class="code" href="classNif_1_1NiKeyframeData.html#acb9d86221218c550302155f9bcfc226e">00789</a>         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ac10804ac65471e3467103d2467cfb845">getrTime</a>(){
<a name="l00790"></a>00790                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a240d4131801925a6b4c518a23fb3ba01">rottime</a>;
<a name="l00791"></a>00791         }
<a name="l00792"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a6450436b9a475967bb96d9b19e16e9c1">00792</a> 
<a name="l00793"></a>00793         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#acb9d86221218c550302155f9bcfc226e">getTranslist1</a>(){
<a name="l00794"></a>00794                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a92331b115ef9cba2fe0cc93aebb9fb91">translist1</a>;
<a name="l00795"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ad4fce999054897e10faf3aceb2dd3352">00795</a>         }
<a name="l00796"></a>00796         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a6450436b9a475967bb96d9b19e16e9c1">getTranslist2</a>(){
<a name="l00797"></a>00797                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a89067fcef610eeeafd0fb5737717151a">translist2</a>;
<a name="l00798"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a8fb2c7a385d52b2ddaef8b20ad703e89">00798</a>         }
<a name="l00799"></a>00799         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ad4fce999054897e10faf3aceb2dd3352">getTranslist3</a>(){
<a name="l00800"></a>00800                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a4f1a8ead5a3678298b5b5f2545ce8b3f">translist3</a>;
<a name="l00801"></a><a class="code" href="classNif_1_1NiKeyframeData.html#aa8c527de051a2db47564a46e861a9992">00801</a>         }
<a name="l00802"></a>00802         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a8fb2c7a385d52b2ddaef8b20ad703e89">gettTime</a>(){
<a name="l00803"></a>00803                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a3471dd1bcb500dec3fcb92db758f0d2f">transtime</a>;
<a name="l00804"></a><a class="code" href="classNif_1_1NiKeyframeData.html#ab58106d4f4c03a5dbb9a59210bbeeafe">00804</a>         }
<a name="l00805"></a>00805         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#aa8c527de051a2db47564a46e861a9992">getScalefactor</a>(){
<a name="l00806"></a>00806                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a6ddb737beb7f32147899e1a12e2b8fee">scalefactor</a>;
<a name="l00807"></a><a class="code" href="classNif_1_1NiKeyframeData.html#aac681a32b419900afd0959e6e44b971c">00807</a>         }
<a name="l00808"></a>00808         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#ab58106d4f4c03a5dbb9a59210bbeeafe">getForwards</a>(){
<a name="l00809"></a>00809                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a48daab0108676528635a8cfabefa20e4">forwards</a>;
<a name="l00810"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a6463e78acda82f826cdfd18802179338">00810</a>         }
<a name="l00811"></a>00811         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#aac681a32b419900afd0959e6e44b971c">getBackwards</a>(){
<a name="l00812"></a>00812                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#adae79fdc7fb2d03db8c35b91c69a64c7">backwards</a>;
<a name="l00813"></a>00813         }
<a name="l00814"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a674839fa0da01b8f39c8fca61be7d0f5">00814</a>         std::vector&lt;Ogre::Vector3&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a6463e78acda82f826cdfd18802179338">getScaleTbc</a>(){
<a name="l00815"></a>00815                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#ad7c2e40e8fcdf8b50559b0d8ef4ffb13">tbcscale</a>;
<a name="l00816"></a>00816         }
<a name="l00817"></a><a class="code" href="classNif_1_1NiKeyframeData.html#a2c3cf2462ede940a711011a98100ca0a">00817</a> 
<a name="l00818"></a>00818         std::vector&lt;float&gt; <a class="code" href="classNif_1_1NiKeyframeData.html#a674839fa0da01b8f39c8fca61be7d0f5">getsTime</a>(){
<a name="l00819"></a>00819                 <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#ad59a265b997a40c819265190d96ab89e">scaletime</a>;
<a name="l00820"></a>00820         }
<a name="l00821"></a>00821         std::string <a class="code" href="classNif_1_1NiKeyframeData.html#a2c3cf2462ede940a711011a98100ca0a">getBonename</a>(){ <span class="keywordflow">return</span> <a class="code" href="classNif_1_1NiKeyframeData.html#a5f99937850ffc1c3da7ec27e5eff290a">bonename</a>;
<a name="l00822"></a>00822         }
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 
<a name="l00825"></a>00825 };
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 } <span class="comment">// Namespace</span>
<a name="l00828"></a>00828 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue May 1 12:03:32 2012 for OpenMW by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
